{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Mistral OCR Health Certificate Fingerprint Schema",
  "description": "A schema to validate the structure of a Mistral OCR fingerprint and template for a Brasil Health Certificate.",
  "type": "object",
  "properties": {
    "name": {
      "description": "A human-readable name for the document configuration.",
      "type": "string"
    },
    "fingerprint": {
      "description": "Defines the unique text sequences to identify the document.",
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["text_sequence"]
        },
        "sequences": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "case_sensitive": {
          "type": "boolean"
        }
      },
      "required": ["type", "sequences", "case_sensitive"],
      "additionalProperties": false
    },
    "template": {
      "description": "The main template defining the extraction rules for the document.",
      "$ref": "#/definitions/healthCertificateTemplate"
    }
  },
  "additionalProperties": false,
  "definitions": {
    "healthCertificateTemplate": {
      "type": "object",
      "properties": {
        "document_properties": {
          "type": "object",
          "properties": {
            "required_fields": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/fieldDefinition"
              }
            }
          },
          "required": ["required_fields"],
          "additionalProperties": false
        },
        "tables": {
          "type": "object",
          "properties": {
            "product_details": {
              "$ref": "#/definitions/tableDefinition"
            }
          },
          "required": ["product_details"],
          "additionalProperties": false
        }
      },
      "required": ["document_properties", "tables"],
      "additionalProperties": false
    },
    "fieldDefinition": {
      "type": "object",
      "properties": {
        "field": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "position": {
          "type": "object",
          "properties": {
            "page": {
              "type": "integer"
            },
            "y1": {
              "type": "number"
            },
            "y2": {
              "type": "number"
            }
          },
          "required": ["page", "y1", "y2"],
          "additionalProperties": false
        }
      },
      "required": ["field", "type"],
      "additionalProperties": false
    },
    "tableDefinition": {
      "type": "object",
      "properties": {
        "columns": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "validation_rules": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        }
      },
      "required": ["columns", "validation_rules"],
      "additionalProperties": false
    }
  }
}
